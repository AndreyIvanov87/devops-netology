# Домашнее задание к занятию "6.1. Типы и структура СУБД"

## Введение

Перед выполнением задания вы можете ознакомиться с 
[дополнительными материалами](https://github.com/netology-code/virt-homeworks/tree/master/additional/README.md).

## Задача 1

Архитектор ПО решил проконсультироваться у вас, какой тип БД 
лучше выбрать для хранения определенных данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:
  
- Электронные чеки в json виде  
	База данных на основе пар «ключ‑значение».  
- Склады и автомобильные дороги для логистической компании  
	Графовые - Данные хранятся в виде узлов (склады), ребер (дороги) и свойств.  
- Генеалогические деревья  
	Иерархическая СУБД. В иерархической модели данные организованы в древовидную структуру.  
- Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации  
	База данных на основе пар «ключ‑значение», например redis из-за поддержки Time-To-Live для данных.  
- Отношения клиент-покупка для интернет-магазина  
	Реляционная. Данные по клиентам, заказам и товарам можно хранить в разных таблицах связывая между собой отношеними в базе.  
  
Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.  

## Задача 2

Вы создали распределенное высоконагруженное приложение и хотите классифицировать его согласно 
CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если 
(каждый пункт - это отдельная реализация вашей системы и для каждого пункта надо привести классификацию):

- Данные записываются на все узлы с задержкой до часа (асинхронная запись)  
	AP - Согласованности (consistency) данных нет, в один момент данные могут быть записаны еще не на всех узлах  
- При сетевых сбоях, система может разделиться на 2 раздельных кластера  
	CA - Нет partition tolerance - система может разделиться.  
- Система может не прислать корректный ответ или сбросить соединение  
	CP - availability не гарантируется.  

А согласно PACELC-теореме, как бы вы классифицировали данные реализации?  
- Данные записываются на все узлы с задержкой до часа (асинхронная запись)    
	без сетевого разделения система доступна, но не консистентна, при разделении то же самое, то есть обеспечена максимальная доступность, поэтому PA/EL  
- При сетевых сбоях, система может разделиться на 2 раздельных кластера  
	в PACELS не рассмотрена ситуация разделения кластера на 2 независимых системы. В основном, все системы - CP и AP  
- Система может не прислать корректный ответ или сбросить соединение  
	Доступность не гарантирована, видимо для поддержания согласованности системы, то есть PC/EC  


## Задача 3

Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?  
Нет, эти принципы взаимоисключают друг друга, например:  
ACID: никакая транзакция не будет зафиксирована в БД частично.  
BASE: фиксация обновлений только критичных операций.  

ACID: гарантия применения успешных транзакций,независимо от низкоуровневых проблем, сохраняются только корректные результаты.   
BASE: Система отвечает на любой запрос, но в ответе могут быть неверные данные.  


## Задача 4  

Вам дали задачу написать системное решение, основой которого бы послужили:

- фиксация некоторых значений с временем жизни
- реакция на истечение таймаута

Вы слышали о key-value хранилище, которое имеет механизм [Pub/Sub](https://habr.com/ru/post/278237/). 
Что это за система? Какие минусы выбора данной системы?  
	Такой функционал может обеспечить redis, СУБД работающая со структурами данных типа «ключ — значение»  
	Поддерживает ограничение времени жизни записей и их удаление после таймаута: https://coderscat.com/how-redis-expire-key/  
	И механизм издатель-подписчик: https://redis.io/topics/pubsub  
	
Минусы redis я бы отметил следующие:  
- работает в один поток, для горизонтального масштабирования даже на одной многоядерной машине придется поднимать несколько экземпляров, возможно в режиме репликации или программно разделять подключения на стороне клиента.  
- хранит данные в оперативной памяти. Хотя есть механизм периодической записи на диск, лога транзаций или репликации, в случае падения сервера есть вероятность потери данных.  
	

---

### Как cдавать задание

Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.

---
